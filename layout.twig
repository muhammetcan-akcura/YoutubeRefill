{% if page['url'] != "/signup" %}
<!DOCTYPE html>
<html lang="{{site['iso_lang_code']}}">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>{{ page['title'] }}</title>
		<meta name="keywords" content="{{ site['seo_key'] }}">
		<meta name="description" content="{{ site['seo_desc'] }}">
		{% if site['favicon'] %}
			<link rel="shortcut icon" type="image/ico" href="{{ site['favicon'] }}"/>
		{% endif %}

		<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
		<!--[if lt IE 9]>
		  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
		  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		  <![endif]-->
		{{ site['custom_header'] }}


					<link rel="stylesheet" type="text/css" href="https://storage.perfectcdn.com/ed17j7/txrq3etljfarlqb7.css">
					<link rel="stylesheet" type="text/css" href="https://storage.perfectcdn.com/global/iw240wwdiy8r3ce4.css">
					<link rel="stylesheet" type="text/css" href="https://storage.perfectcdn.com/libs/bootstrap-datetimepicker/4.17.47/bootstrap-datetimepicker.min.css">
					<link rel="stylesheet" type="text/css" href="https://storage.perfectcdn.com/css/font-awesome/css/all.min.css">
					<link rel="stylesheet" type="text/css" href="https://storage.perfectcdn.com/global/w1ak29btsbdhu8s0.css">
					<link rel="stylesheet" type="text/css" href="https://storage.perfectcdn.com/global/cao32di3zo8u7xgq.css">
		<script>
			window.modules = {};
		</script>

{% if user['auth'] %}

 <link rel="stylesheet" href="https://cdn.sosyaltrend.net/dashboard/styles.css?time=455555555">
    <link rel="stylesheet" href="https://cdn.sosyaltrend.net/dashboard/style2.css?time=455555555">
    <link rel="stylesheet" href="https://cdn.sosyaltrend.net/dashboard/dark-mode.css?time=455523355555">
    <script>
    // Prevent FOUC - Apply theme immediately
    (function() {
        var savedTheme = localStorage.getItem('darkMode');
        var isDark = savedTheme !== null ? savedTheme === 'true' : false; // Default to light mode
        
        if (isDark) {
            document.documentElement.classList.add('dark', 'dark-mode');
            if (document.body) {
                document.body.classList.add('dark-mode');
                document.body.classList.remove('bg-white');
            }
        }
    })();
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://api.fontshare.com/v2/css?f[]=satoshi@400,500,700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.2.0/fonts/remixicon.css" rel="stylesheet" />
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>

           {% for script in site['scripts'] %}
            <script type="text/javascript" {% if script['src'] %} src="{{ script['src'] }}" {% endif %}>
                {% if script['code'] %}
{{ script['code'] }}
{% endif %}
            </script>
        {% endfor %}
      
      <script src="https://cdn.sosyaltrend.net/dashboard/dark-mode.js?time=4555555345"></script>
    <style type="text/tailwindcss">
        .user-dropdown-menu {
            @apply opacity-0 invisible transition-all duration-200 ease-in-out transform translate-y-2;
        }
        .user-dropdown-menu.active {
            @apply opacity-100 visible translate-y-0;
        }
        .user-profile-container.active .dropdown-icon {
            @apply rotate-180;
        }
        .btn-custom-active {
            border: 1px solid #4580f7;
            background: linear-gradient(
                0deg,
                rgba(255, 255, 255, 0.16) 6.48%,
                rgba(255, 255, 255, 0) 100%
            ),
            #134de2;
            box-shadow: 0px 0px 0px 1px #4580f7;
        }
        .btn-custom-active:hover {
            background: #103fad;
            border-color: #103fad;
        }
        .avatar-custom-style {
            border: 1px solid #4580f7;
            background: radial-gradient(
              92.44% 92.44% at 53.86% 101.1%,
              #4580f7 0%,
              #145ff5 52.51%
            );
        }
        #top-bar::after {
            content: '';
            position: absolute;
            inset: 0;
            background-color: rgb(0 0 0 / 0.5);
            opacity: 0;
            transition: opacity 300ms ease-in-out;
            pointer-events: none;
            z-index: 2;
        }
        #top-bar.top-bar-overlayed::after {
            opacity: 1;
        }
        #sidebar-overlay {
            opacity: 0;
            pointer-events: none;
            transition: opacity 300ms ease-in-out;
        }
        #sidebar-overlay.visible {
            opacity: 1;
            pointer-events: auto;
        }
        /* Custom Scrollbar */
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #d1d5db;
            border-radius: 10px;
        }
        
        /* Tab Button Styles */
        .tab-button {
            transition: all 0.3s ease;
        }
        
        .tab-button.active-tab {
            background-color: var(--primary-blue);
            color: white;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        
        .tab-button.active-tab .tab-icon {
            color: white !important;
        }
        
        .tab-button.active-tab .tab-title {
            color: white !important;
        }
        
        .tab-button.active-tab .tab-subtitle {
            color: rgba(255, 255, 255, 0.8) !important;
        }
        
        .tab-button.inactive-tab {
            background-color: transparent;
            color: var(--text-dark);
        }
        
        .tab-button.inactive-tab .tab-icon {
            color: #8b5cf6 !important;
        }
        
        .tab-button.inactive-tab .tab-title {
            color: var(--text-dark) !important;
        }
        
        .tab-button.inactive-tab .tab-subtitle {
            color: var(--text-dark) !important;
        }
        
        /* Custom Development tab when active */
        .tab-button.active-tab[id="custom-dev-tab"] {
            background-color: #8b5cf6 !important;
        }
        
        .tab-button.active-tab[id="custom-dev-tab"] .tab-icon {
            color: white !important;
        }
        
        /* WordPress tab when inactive */
        .tab-button.inactive-tab[id="wordpress-tab"] .tab-icon {
            color: var(--primary-blue) !important;
        }
        
        /* Dark mode hover styles */
        .dark-mode .tab-button.inactive-tab:hover {
            background-color: rgba(255, 255, 255, 0.1) !important;
        }
        
        .dark-mode .tab-button.inactive-tab:hover .tab-icon {
            color: #8b5cf6 !important;
        }
        
        .dark-mode .tab-button.inactive-tab:hover .tab-title {
            color: white !important;
        }
        
        .dark-mode .tab-button.inactive-tab:hover .tab-subtitle {
            color: rgba(255, 255, 255, 0.8) !important;
        }
        
        /* Light mode hover styles */
        .tab-button.inactive-tab:hover {
            background-color: #f8fafc !important;
        }
        
        .tab-button.inactive-tab:hover .tab-icon {
            color: #8b5cf6 !important;
        }
        
        .tab-button.inactive-tab:hover .tab-title {
            color: var(--text-dark) !important;
        }
        
        .tab-button.inactive-tab:hover .tab-subtitle {
            color: var(--text-dark) !important;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #9ca3af;
        }
        .filter-btn-active {
            border: 1px solid #4580f7;
            background: linear-gradient(0deg, rgba(255, 255, 255, 0.16) 6.48%, rgba(255, 255, 255, 0) 100%), #134de2;
            box-shadow: 0px 0px 0px 1px #4580f7;
            color: white;
            border-radius: 25px;
        }
        
        /* Page Loader Styles */
        .loader-spinner {
            position: relative;
            width: 60px;
            height: 60px;
            margin: 0 auto;
        }
        
        .spinner-ring {
            width: 100%;
            height: 100%;
            border: 3px solid rgba(69, 128, 247, 0.2);
            border-top: 3px solid var(--primary-blue);
            border-radius: 50%;
            animation: spin 1.2s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Mobile responsive loader */
        @media (max-width: 768px) {
            .loader-spinner {
                width: 50px;
                height: 50px;
            }
            
            .spinner-ring {
                border-width: 2.5px;
            }
        }
        
        @media (max-width: 480px) {
            .loader-spinner {
                width: 40px;
                height: 40px;
            }
            
            .spinner-ring {
                border-width: 2px;
            }
        }
        
        /* Extras Panel Dark Mode Styles */
        .dark-mode #extras-panel {
            background: linear-gradient(to bottom, #1e293b, #334155);
            border-left-color: #475569;
            box-shadow: -10px 0 20px rgba(0, 0, 0, 0.2);
        }
        
        .dark-mode #extras-panel h2 {
            color: #f8fafc;
        }
        
        .dark-mode #extras-panel .bg-gray-50 {
            background-color: #475569;
        }
        
        .dark-mode #extras-panel .hover\:bg-gray-100:hover {
            background-color: #64748b;
        }
        
        .dark-mode #extras-panel h3 {
            color: #f8fafc;
        }
        
        .dark-mode #extras-panel .text-gray-600 {
            color: #cbd5e1;
        }
        
        .dark-mode #extras-panel .hover\:bg-gray-100 {
            background-color: #64748b;
        }
        
        .dark-mode #extras-panel .border-gray-200\/80 {
            border-color: #475569;
        }
        
        .dark-mode #extras-panel .border-b {
            border-color: #475569;
        }
        
        /* Action Buttons Dark Mode Styles */
        .dark-mode .bg-gray-50 {
            background-color: #374151;
        }
        
        .dark-mode .hover\:bg-gray-100:hover {
            background-color: #4b5563;
        }
        
        .dark-mode .border-gray-200 {
            border-color: #4b5563;
        }
        
        /* Notifications Panel Dark Mode Styles */
        .dark-mode #notifications-panel {
            background: linear-gradient(to bottom, #1e293b, #334155);
            border-left-color: #475569;
            box-shadow: -10px 0 20px rgba(0, 0, 0, 0.2);
        }
        
        .dark-mode #notifications-panel h2 {
            color: #f8fafc;
        }
        
        .dark-mode #notifications-panel .bg-white {
            background-color: #374151;
            border-color: #4b5563;
        }
        
        .dark-mode #notifications-panel .text-gray-800 {
            color: #f8fafc;
        }
        
        .dark-mode #notifications-panel .text-gray-600 {
            color: #cbd5e1;
        }
        
        .dark-mode #notifications-panel .text-gray-500 {
            color: #9ca3af;
        }
        
        .dark-mode #notifications-panel .border-gray-100 {
            border-color: #4b5563;
        }
        
        .dark-mode #notifications-panel .hover\:bg-gray-100:hover {
            background-color: #4b5563;
        }
        
        /* Sidebar Dark Mode Styles */
        .dark-mode #sidebar {
            background: linear-gradient(to bottom, #1e293b, #334155);
            border-right-color: #475569;
        }
        
        .dark-mode #sidebar .border-b {
            border-color: #475569;
        }
        
        /* Logo Dark Mode Visibility */
        .dark-mode #sidebar img {
            filter: brightness(1.2) contrast(1.1);
            opacity: 1 !important;
            visibility: visible !important;
            display: block !important;
        }
        
        /* Ensure logo is always visible */
        #sidebar img {
            opacity: 1 !important;
            visibility: visible !important;
            display: block !important;
            min-height: 48px !important;
            max-height: 60px !important;
        }
        
        /* Logo Container and Image Styles */
        .logo-container {
            width: 100%;
            height: 100%;
            display: flex !important;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        
        .logo-image {
            height: 40px !important;
            width: auto !important;
            max-width: 150px !important;
            max-height: 40px !important;
            object-fit: contain !important;
            display: block !important;
            opacity: 1 !important;
            visibility: visible !important;
            z-index: 10;
        }
        
        .fallback-logo {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 5;
        }
        
        /* Dark mode logo adjustments */
        .dark-mode .logo-image {
            filter: brightness(1.2) contrast(1.1) !important;
        }
        
        .dark-mode .fallback-logo {
            background: linear-gradient(135deg, #60a5fa, #3b82f6) !important;
        }
        
        /* Language Dropdown Dark Mode Styles */
        .dark-mode #language-dropdown-container button {
            background-color: #374151;
            border-color: #4b5563;
            color: #f8fafc;
        }
        
        .dark-mode #language-dropdown-container button:hover {
            background-color: #4b5563;
        }
        
        .dark-mode #language-dropdown-container button span {
            color: #f8fafc;
        }
        
        .dark-mode #language-dropdown-menu {
            background-color: #374151;
            border-color: #4b5563;
        }
        
        .dark-mode #language-dropdown-menu a {
            color: #f8fafc;
        }
        
        .dark-mode #language-dropdown-menu a:hover {
            background-color: #4b5563;
        }
        
        .dark-mode #language-dropdown-menu a .text-gray-800 {
            color: #f8fafc !important;
        }
        
        .dark-mode #language-dropdown-menu a .text-gray-500 {
            color: #9ca3af !important;
        }
        
        /* Mobile Language Dropdown Dark Mode Styles */
        .dark-mode #mobile-language-dropdown-container button {
            background-color: #374151;
            border-color: #4b5563;
            color: #f8fafc;
        }
        
        .dark-mode #mobile-language-dropdown-container button:hover {
            background-color: #4b5563;
        }
        
        .dark-mode #mobile-language-dropdown-container button span {
            color: #f8fafc;
        }
        
        .dark-mode #mobile-language-dropdown-menu {
            background-color: #374151;
            border-color: #4b5563;
        }
        
        .dark-mode #mobile-language-dropdown-menu a {
            color: #f8fafc;
        }
        
        .dark-mode #mobile-language-dropdown-menu a:hover {
            background-color: #4b5563;
        }
        
        .dark-mode #mobile-language-dropdown-menu a .text-gray-800 {
            color: #f8fafc !important;
        }
        
        .dark-mode #mobile-language-dropdown-menu a .text-gray-500 {
            color: #9ca3af !important;
        }
    </style>
</head>
<body class="overflow-x-hidden bg-white text-gray-700" id="body-element">
<!-- Page Loader -->
    <div id="page-loader" class="fixed inset-0 z-[9999] flex items-center justify-center transition-all duration-300" style="background-color: var(--light-bg);">
        <div class="loader-spinner">
            <div class="spinner-ring"></div>
        </div>
    </div>

<div id="sidebar-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden"></div>

    <aside id="sidebar" class="w-72 bg-white border-r border-gray-200/80 flex flex-col fixed top-0 left-0 h-full z-40 lg:z-40 transform -translate-x-full lg:translate-x-0 transition-transform duration-300 ease-in-out">
        <div class="border-b border-gray-200/80 h-24">
            <div class="relative flex items-center justify-center px-6 h-full">
                <div class="logo-container flex items-center justify-center h-full">
                    <a href="{{ page_url('index') }}" class="flex items-center justify-center h-full">
                        {% if site['logo'] %}
                            <img src="{{ site['logo'] }}" alt="{{ site['name'] }}" title="{{ site['name'] }}" class="logo-image" 
                                 onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                            <div class="fallback-logo" style="display: none; height: 48px; width: 150px; background: linear-gradient(135deg, #4580f7, #145ff5); border-radius: 8px; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 16px;">
                                {{ site['name'] }}
                            </div>
                        {% else %}
                            <div class="fallback-logo" style="height: 48px; width: 150px; background: linear-gradient(135deg, #4580f7, #145ff5); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 16px;">
                                {{ site['name'] }}
                            </div>
                        {% endif %}
                    </a>
                </div>
                <button id="sidebar-close" class="absolute right-4 top-1/2 -translate-y-1/2 lg:hidden text-gray-600 bg-white hover:text-gray-900 w-10 h-10 flex items-center justify-center rounded-full hover:bg-gray-100 transition-colors border border-gray-200/80 mr-[-35px] hidden">
                    <i class="ri-arrow-left-line text-2xl"></i>
                </button>
            </div>
        </div>

        <!-- Mobile Actions (below logo) -->
        <div class="border-b border-gray-200/80 px-6 py-1.5 lg:hidden">
            <div class="flex items-center gap-3 justify-center">
                <!-- Mobile Telegram Link -->
                <a href="https://t.me/SmmExclusive" target="_blank" class="px-4 py-2 rounded-full border border-gray-200/80 flex items-center justify-center gap-2 text-blue-500 hover:text-blue-600 hover:bg-blue-50 transition-colors text-sm font-medium" aria-label="Open Telegram">
                    <i class="ri-telegram-fill text-lg"></i>
                    Telegram
                </a>
                
                <!-- Mobile Extras Link -->
                <a href="#" id="mobile-extras-toggle" class="px-4 py-2 rounded-full border border-gray-200/80 flex items-center justify-center gap-2 text-gray-600 hover:text-gray-900 hover:bg-gray-50 transition-colors text-sm font-medium" aria-label="Open extras panel">
                    <i class="ri-hand text-lg"></i>
                    Extras
                </a>
            </div>
        </div>

        <div class="p-6 flex-1 overflow-y-auto custom-scrollbar">
     


            <nav class="flex-grow flex flex-col">
    {% for menu in site['menu'] %}
        {% if menu['name'] is not empty %}
            <a href="{{ menu['link'] }}" {% if menu['external'] %} target="_blank" {% endif %}
               class="{% if menu['active'] %}btn-custom-active text-white{% else %}group text-gray-700 hover:bg-indigo-50{% endif %} flex items-center gap-4 py-3 px-4 my-1 rounded-full font-medium transition-all duration-200">
                
                {% if menu['link'] == '/' %}
                    <i class="ri-shopping-cart-line text-xl"></i>
                {% elseif menu['link'] == '/massorder' %}
                    <i class="ri-instance-line text-xl"></i>
                {% elseif menu['link'] == '/orders' %}
                    <i class="ri-file-list-3-line text-xl"></i>
                {% elseif menu['link'] == '/addfunds' %}
                    <i class="ri-bank-card-line text-xl"></i>
                {% elseif menu['link'] == '/tickets' %}
                    <i class="ri-coupon-3-line text-xl"></i>
                {% elseif menu['link'] == '/services' %}
                    <i class="ri-list-check-2 text-xl"></i>
                {% elseif menu['link'] == '/contact' %}
                    <i class="ri-contacts-book-line text-xl"></i>
                {% elseif menu['link'] == '/updates' %}
                    <i class="ri-loop-left-line text-xl"></i>
                {% elseif menu['link'] == '/affiliates' %}
                    <i class="ri-user-add-line text-xl"></i>
                {% elseif menu['link'] == '/child-panel' %}
                    <i class="ri-price-tag-3-line text-xl"></i>
                {% elseif menu['link'] == '/api' %}
                    <i class="ri-code-s-slash-line text-xl"></i>
                {% elseif menu['link'] == '/subscriptions' %}
                    <i class="ri-time-line text-xl"></i>
                {% elseif menu['link'] == '/drip-feed' %}
                    <i class="ri-drop-line text-xl"></i>
                {% elseif menu['link'] == '/orders/refunds' %}
                    <i class="ri-exchange-dollar-line text-2xl"></i>
                {% elseif menu['link'] == '/createinvoice' %}
                    <i class="ri-bill-line text-2xl"></i>
                {% else %}
                    <i class="ri-menu-line text-xl"></i>
                {% endif %}
                
                <span>{{ menu['name'] }}</span>

                {% if not menu['active'] %}
                    <i class="ri-arrow-right-s-line ml-auto text-xl opacity-0 group-hover:opacity-100 transition-opacity"></i>
                {% else %}
                    <i class="ri-arrow-right-s-line ml-auto"></i>
                {% endif %}
            </a>
        {% endif %}
    {% endfor %}
</nav>

        </div>

        <div class="mt-auto p-6 pt-4 border-t border-gray-200/80">
            <a href="/logout" class="group flex items-center gap-4 py-3 px-4 my-1 rounded-full font-medium transition-colors text-red-600 hover:bg-red-50">
                <i class="ri-logout-box-r-line text-xl"></i>
                <span>Logout</span>
            </a>
        </div>
    </aside>

    <div id="main-content" class="lg:ml-72 flex-grow">
        <div id="top-bar" class="sticky top-0 z-50 bg-white h-24">
            <header class="flex items-center justify-between px-4 lg:px-[60px] h-full bg-white border-b border-gray-200/80">
                <!-- Breadcrumb -->
                <div class="flex items-center gap-x-4">
                    <button id="sidebar-toggle" class="lg:hidden text-gray-600 hover:text-gray-900 w-10 h-10 flex items-center justify-center rounded-full border border-gray-200/80 hover:bg-gray-100 transition-colors">
                        <i class="ri-menu-line text-2xl"></i>
                    </button>
                    <!-- Breadcrumb -->
                    <div class="text-base hidden lg:block">
                        <nav class="flex items-center font-medium text-gray-500">
                            <a href="#" class="hover:text-gray-900">Home</a>
                            <i class="ri-arrow-right-s-line mx-1"></i>
                            <span class="text-gray-800">{{ page['title'] }}</span>
                        </nav>
                        <p class="text-gray-500 mt-1">This is a page with {{ page['title'] }}</p>
                    </div>
                </div>

                <!-- Header Actions -->
                <div class="flex items-center gap-x-3 lg:gap-x-6 text-sm">
                    <!-- Balance with Currency Dropdown -->
                    {% for menu in site['account_menu'] %}
                        {% if not menu['link'] %}
                            {% if site.currencies %}
                                <div class="relative" id="balance-currency-container">
                                    <button id="balance-currency-toggle" class="flex items-center gap-x-3 cursor-pointer hover:bg-gray-50 p-2 rounded-lg transition-colors" aria-haspopup="true" aria-expanded="false">
                                        <div class="w-8 h-8 rounded-full flex items-center justify-center" style="border: 1px solid #4580f7; background: linear-gradient(0deg, rgba(255, 255, 255, 0.16) 6.48%, rgba(255, 255, 255, 0) 100%), #0f3a8f; box-shadow: 0px 0px 0px 1px #4580f7; color: white; border-radius: 25px;">
                                            <span class="text-xl text-white font-bold">{{ user.currency.symbol }}</span>
                                        </div>
                                        <div>
                                            <span class="text-gray-500">Balance</span>
                                            <div class="flex items-center gap-x-1.5">
                                                <strong class="font-semibold text-gray-800">{{ user.balance_formatted }}</strong>
                                                <i class="ri-arrow-down-s-line text-gray-500 transition-transform duration-200"></i>
                                            </div>
                                        </div>
                                    </button>
                                    <div id="balance-currency-menu" class="absolute top-full left-0 mt-3 w-64 bg-white/80 backdrop-blur-md rounded-xl border border-gray-200/80 shadow-lg z-45 hidden origin-top-left">
                                        <!-- Search Box -->
                                        <div class="p-3 border-b border-gray-200/50">
                                            <div class="relative">
                                                <input type="text" id="currency-search" placeholder="Search currency..." class="w-full pl-10 pr-4 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                                <i class="ri-search-line absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                                            </div>
                                        </div>
                                        
                                        <!-- Currency List with Scroll -->
                                        <div class="max-h-64 overflow-y-auto custom-scrollbar">
                                            <div class="p-2" id="currency-list">
                                                {% for key, rate in site.currencies %}
                                                    <a href="#" class="currency-item flex items-center gap-x-3 p-2.5 rounded-lg {% if loop.first %}bg-gray-900/5{% else %}hover:bg-gray-900/5{% endif %} {% if not loop.first %}mt-1{% endif %}" data-rate-key="{{ key }}" data-rate-symbol="{{ rate.symbol }}" data-search-text="{{ key|lower }} {{ rate.symbol|lower }}">
                                                        <div class="w-6 h-6 bg-gray-100 rounded-full flex items-center justify-center">
                                                            <span class="text-xs font-bold">{{ rate.symbol }}</span>
                                                        </div>
                                                        <div>
                                                            <strong class="font-semibold text-sm text-gray-800">{{ key }}</strong>
                                                            <span class="block text-xs text-gray-500">{{ rate.symbol }}</span>
                                                        </div>
                                                    </a>
                                                {% endfor %}
                                            </div>
                                            
                                            <!-- No Results Message -->
                                            <div id="no-currency-results" class="p-4 text-center text-gray-500 text-sm hidden">
                                                <i class="ri-search-line text-2xl mb-2 block"></i>
                                                No currency found
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            {% else %}
                                <div class="relative">
                                    <div class="flex items-center gap-x-3 p-2 rounded-lg">
                                        <div class="w-8 h-8 rounded-full flex items-center justify-center" style="border: 1px solid #4580f7; background: linear-gradient(0deg, rgba(255, 255, 255, 0.16) 6.48%, rgba(255, 255, 255, 0) 100%), #0f3a8f; box-shadow: 0px 0px 0px 1px #4580f7; color: white; border-radius: 25px;">
                                            <span class="text-xl text-white font-bold">$</span>
                                        </div>
                                        <div>
                                            <span class="text-gray-500">{{ menu['name'] }}</span>
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                        {% endif %}
                    {% endfor %}



                    <!-- Separator -->
                    <div class="h-8 w-px bg-gray-200/80"></div>

                    <!-- Action Buttons -->
                    <div class="flex items-center gap-x-3">
                        <a href="https://t.me/SmmExclusive" target="_blank" class="relative w-12 h-12 rounded-full border border-gray-200/80 flex items-center justify-center text-blue-500 hover:text-blue-600 hover:bg-blue-50 transition-colors hidden lg:flex" aria-label="Open Telegram">
                            <i class="ri-telegram-fill text-2xl"></i>
                        </a>
                        <button id="notifications-toggle" class="relative w-12 h-12 rounded-full border border-gray-200/80 flex items-center justify-center text-gray-600 hover:text-gray-900 hover:bg-gray-100 transition-colors" aria-label="Open notifications panel">
                            <i class="ri-notification-3-line text-xl"></i>
                            <span class="absolute top-1 right-1 w-4 h-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center ring-2 ring-white">1</span>
                        </button>
                        
                        <!-- Dark Mode Toggle Button -->
                        <button id="theme-toggle" class="relative w-12 h-12 rounded-full border border-gray-200/80 flex items-center justify-center text-gray-600 hover:text-gray-900 hover:bg-gray-100 transition-colors theme-toggle-btn" aria-label="Toggle dark mode">
                            <i class="ri-sun-line light-icon text-xl"></i>
                            <i class="ri-moon-line dark-icon text-xl" style="display: none;"></i>
                        </button>
                        
                        <!-- Extras Button (Hand Icon) -->
                        <button id="extras-toggle" class="relative w-12 h-12 rounded-full border border-gray-200/80 flex items-center justify-center text-gray-600 hover:text-gray-900 hover:bg-gray-100 transition-colors hidden lg:flex" aria-label="Open extras panel">
                            <i class="ri-hand text-xl"></i>
                        </button>
                    </div>

                    <!-- User Avatar -->
                    <div class="relative" id="user-dropdown-container">
                        <button id="user-dropdown-toggle" class="flex items-center gap-x-2 bg-white rounded-full p-1 lg:pr-3 border border-gray-200/80" aria-haspopup="true" aria-expanded="false">
                            <div class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-bold text-base">
                                U
                            </div>
                            <div class="hidden lg:block">
                                <span class="text-sm font-bold text-gray-800">{{ user['username'] }}</span>
                                <div class="text-xs text-gray-500 flex items-center gap-1">
                                <div class="w-2 h-2 bg-green-500 rounded-full"></div>

                                Online
                                </div>
                            </div>
                            <i class="ri-arrow-down-s-line text-gray-500 transition-transform duration-200 hidden lg:block"></i>
                        </button>
                        <div id="user-dropdown-menu" class="absolute top-full right-0 mt-3 w-48 bg-white/80 backdrop-blur-md rounded-xl border border-gray-200/80 shadow-lg z-45 hidden origin-top-right">
                            <div class="p-2">
                                <a href="/account" class="flex items-center gap-x-3 p-2.5 rounded-lg hover:bg-gray-900/5 transition-colors">
                                    <i class="ri-user-settings-line text-xl text-gray-600"></i>
                                    <div>
                                        <strong class="font-semibold text-sm text-gray-800">Account Settings</strong>
                                    </div>
                                </a>
                                <a href="/accountbenefits" class="flex items-center gap-x-3 p-2.5 rounded-lg hover:bg-gray-900/5 transition-colors">
                                    <i class="ri-gift-line text-xl text-gray-600"></i>
                                    <div>
                                        <strong class="font-semibold text-sm text-gray-800">Account Benefits</strong>
                                    </div>
                                </a>
                                <a href="/api" class="flex items-center gap-x-3 p-2.5 rounded-lg hover:bg-gray-900/5 transition-colors">
                                    <i class="ri-code-s-slash-line text-xl text-gray-600"></i>
                                    <div>
                                        <strong class="font-semibold text-sm text-gray-800">API</strong>
                                    </div>
                                </a>
                                <a href="/logout" class="flex items-center gap-x-3 p-2.5 rounded-lg hover:bg-red-50 transition-colors">
                                    <i class="ri-logout-box-r-line text-xl text-red-600"></i>
                                    <div>
                                        <strong class="font-semibold text-sm text-red-600">Logout</strong>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </header>
        </div>
        <!-- Extras Panel -->
        <div id="extras-panel" class="fixed top-0 right-0 h-full w-full lg:w-96 bg-white border-l border-gray-200/80 z-50 transform translate-x-full transition-transform duration-300 ease-in-out" style="box-shadow: -10px 0 20px rgba(0, 0, 0, 0.1);">
            <div class="flex items-center justify-between p-4 border-b border-gray-200/80">
                <h2 class="text-lg font-semibold text-gray-800">Extras</h2>
                <button id="extras-close" class="w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100 transition-colors">
                    <i class="ri-close-line text-xl text-gray-600"></i>
                </button>
            </div>
            
            <div class="p-4 space-y-3">
                <!-- Website Design Card -->
                <a href="/website-design" target="_blank" class="bg-gray-50 rounded-lg p-4 hover:bg-gray-100 transition-colors cursor-pointer border border-gray-200 block">
                    <div class="flex items-center justify-between">
                        <h3 class="text-sm font-semibold text-gray-800">Website Design</h3>
                        <div class="w-12 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                            <i class="ri-wordpress-line text-lg text-blue-600"></i>
                        </div>
                    </div>
                    <p class="text-xs text-gray-600 mt-2">WordPress - Custom Web Development</p>
                </a>
                
                <!-- SMM Panel Design Card -->
                <a href="/website-design" target="_blank" class="bg-gray-50 rounded-lg p-4 hover:bg-gray-100 transition-colors cursor-pointer border border-gray-200 block">
                    <div class="flex items-center justify-between">
                        <h3 class="text-sm font-semibold text-gray-800">SMM Panel Design</h3>
                        <div class="w-12 h-10 bg-purple-100 rounded-lg flex items-center justify-center">
                            <i class="ri-dashboard-3-line text-lg text-purple-600"></i>
                        </div>
                    </div>
                    <p class="text-xs text-gray-600 mt-2">Child Panel - Custom Web Development</p>
                </a>
                
                <!-- WhatsApp/Telegram CRM Card -->
                <a href="/bulk-message-automation" target="_blank" class="bg-gray-50 rounded-lg p-4 hover:bg-gray-100 transition-colors cursor-pointer border border-gray-200 block">
                    <div class="flex items-center justify-between">
                        <h3 class="text-sm font-semibold text-gray-800">WhatsApp/Telegram CRM</h3>
                        <div class="w-12 h-10 bg-green-100 rounded-lg flex items-center justify-center">
                            <i class="ri-customer-service-2-line text-lg text-green-600"></i>
                        </div>
                    </div>
                </a>
            </div>
        </div>

        <!-- Notifications Panel -->
        <div id="notifications-panel" class="fixed top-0 right-0 h-full w-full md:w-[500px] bg-white border-l border-gray-200/80 z-50 transform translate-x-full transition-transform duration-300 ease-in-out" style="box-shadow: -10px 0 20px rgba(0, 0, 0, 0.1);">
            <div class="flex items-center justify-between p-4 border-b border-gray-200/80">
                <h2 class="text-lg font-semibold text-gray-800">Notifications</h2>
                <button id="notifications-close" class="w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100 transition-colors">
                    <i class="ri-close-line text-xl text-gray-600"></i>
                </button>
            </div>
            
            <div class="p-4 pb-8 space-y-4 overflow-y-auto h-full">
            {# 
                <!-- Announcement Card 1 -->
                <div class="bg-white rounded-lg p-4 border border-gray-200 shadow-sm">
                    <div class="flex items-start gap-2 mb-3">
                        <span class="bg-blue-500 text-white text-xs font-bold px-2 py-1 rounded">NEW</span>
                        <span class="text-gray-500 text-sm">June 30, 2025</span>
                    </div>
                    
                    <div class="flex items-center gap-2 mb-4">
                        <i class="ri-fire-line text-orange-500"></i>
                        <h3 class="text-lg font-bold text-gray-800">Cheapest Stable TikTok Followers</h3>
                        <i class="ri-fire-line text-orange-500"></i>
                    </div>
                    
                    <div class="space-y-3">
                        <div class="border-b border-gray-100 pb-2">
                            <div class="text-gray-600 text-sm">924 - TikTok Followers [0-1 Hour] [500-1K/Day]</div>
                            <div class="text-gray-600 text-sm">[NoRefill]</div>
                            <div class="text-lg font-bold text-gray-800">1.0349$/K</div>
                        </div>
                        
                        <div class="border-b border-gray-100 pb-2">
                            <div class="flex items-center gap-2">
                                <span class="text-gray-600 text-sm">2850 - TikTok Followers [0-1 Hour] [500-1K/Day]</span>
                                <i class="ri-refresh-line text-green-500 text-sm"></i>
                            </div>
                            <div class="text-gray-600 text-sm">Refill : 30 Days]</div>
                            <div class="text-lg font-bold text-gray-800">1.0937$/K</div>
                        </div>
                        
                        <div class="border-b border-gray-100 pb-2">
                            <div class="flex items-center gap-2">
                                <span class="text-gray-600 text-sm">1332 - TikTok Followers [0-1 Hour] [500-1K/Day]</span>
                                <i class="ri-refresh-line text-green-500 text-sm"></i>
                            </div>
                            <div class="text-gray-600 text-sm">Refill : 365 Days]</div>
                            <div class="text-lg font-bold text-gray-800">1.2348$/K</div>
                        </div>
                    </div>
                    
                    <div class="mt-4 space-y-2 text-sm text-gray-600">
                        <div>All of them are real data, stable delivery services without any issues</div>
                        <div>All type of support is available as always!</div>
                        <div>Up to 10% discount available!</div>
                        <div>Contact from <a href="tickets" class="text-blue-500 hover:text-blue-600">Tickets</a> for Discounts and Details</div>
                    </div>
                </div>
                #}
<!-- Announcement Card 4 -->
<div class="bg-white rounded-xl p-6 border border-gray-200 shadow-md">
    <div class="flex items-start gap-3 mb-5">
        <span class="bg-pink-500 text-white text-xs font-bold px-3 py-1 rounded">ANNOUNCEMENT</span>
        <span class="text-gray-500 text-sm">August 12, 2025</span>
    </div>
    
    <div class="flex items-center gap-3 mb-6">
        <i class="ri-layout-line text-pink-500 text-xl"></i>
        <h3 class="text-xl font-bold text-gray-800">âœ¨ Big Upgrade Alert! âœ¨</h3>
        <i class="ri-layout-line text-pink-500 text-xl"></i>
    </div>
    
    <div class="space-y-5">
        <div class="border-b border-gray-100 pb-4">
            <div class="text-xl font-bold text-gray-800 mb-2">ðŸš€ SmmExclusive V2 is LIVE!</div>
            <p class="text-gray-600 text-base leading-relaxed">
                Our brand-new modern design is finally here â€” faster, sleeker, and more user-friendly than ever before.
            </p>
        </div>

        <div class="border-b border-gray-100 pb-4 text-gray-600 text-base leading-relaxed space-y-2">
            <div>âœ” Fresh modern interface</div>
            <div>âœ” Smoother navigation</div>
            <div>âœ” Enhanced user experience</div>
        </div>
        
        <p class="text-gray-600 text-base leading-relaxed">
            From today, enjoy a next-level platform built just for you! ðŸŽ‰
        </p>
    </div>
    
    <div class="mt-6 space-y-3 text-base text-gray-600 leading-relaxed">
        <p>ðŸ’­ We care about your opinions. Please feel free to contact us with your questions and suggestions.</p>
        <p class="font-semibold !mt-10 text-gray-800">Stand Out, Stay Exclusive!</p>
    </div>
</div>


{# 
                <!-- Announcement Card 2 -->
                <div class="bg-white rounded-lg p-4 border border-gray-200 shadow-sm">
                    <div class="flex items-start gap-2 mb-3">
                        <span class="bg-green-500 text-white text-xs font-bold px-2 py-1 rounded">UPDATE</span>
                        <span class="text-gray-500 text-sm">June 28, 2025</span>
                    </div>
                    
                    <div class="flex items-center gap-2 mb-4">
                        <i class="ri-star-line text-yellow-500"></i>
                        <h3 class="text-lg font-bold text-gray-800">New Instagram Services Available</h3>
                        <i class="ri-star-line text-yellow-500"></i>
                    </div>
                    
                    <div class="space-y-3">
                        <div class="border-b border-gray-100 pb-2">
                            <div class="text-gray-600 text-sm">Instagram Followers - High Quality [0-2 Hours]</div>
                            <div class="text-gray-600 text-sm">[Refill: 60 Days]</div>
                            <div class="text-lg font-bold text-gray-800">2.50$/K</div>
                        </div>
                        
                        <div class="border-b border-gray-100 pb-2">
                            <div class="flex items-center gap-2">
                                <span class="text-gray-600 text-sm">Instagram Likes - Real Users [Instant]</span>
                                <i class="ri-refresh-line text-green-500 text-sm"></i>
                            </div>
                            <div class="text-gray-600 text-sm">[No Refill]</div>
                            <div class="text-lg font-bold text-gray-800">0.85$/K</div>
                        </div>
                    </div>
                    
                    <div class="mt-4 space-y-2 text-sm text-gray-600">
                        <div>Premium quality Instagram services with guaranteed delivery</div>
                        <div>24/7 customer support available</div>
                        <div>Contact from <a href="tickets" class="text-blue-500 hover:text-blue-600">Tickets</a> for bulk orders</div>
                    </div>
                </div>

                <!-- Announcement Card 3 -->
                <div class="bg-white rounded-lg p-4 border border-gray-200 shadow-sm">
                    <div class="flex items-start gap-2 mb-3">
                        <span class="bg-purple-500 text-white text-xs font-bold px-2 py-1 rounded">SPECIAL</span>
                        <span class="text-gray-500 text-sm">June 25, 2025</span>
                    </div>
                    
                    <div class="flex items-center gap-2 mb-4">
                        <i class="ri-gift-line text-purple-500"></i>
                        <h3 class="text-lg font-bold text-gray-800">Weekend Special Discount</h3>
                        <i class="ri-gift-line text-purple-500"></i>
                    </div>
                    
                    <div class="space-y-3">
                        <div class="border-b border-gray-100 pb-2">
                            <div class="text-gray-600 text-sm">All YouTube Services - 15% OFF</div>
                            <div class="text-gray-600 text-sm">Valid until Sunday</div>
                            <div class="text-lg font-bold text-gray-800">Use Code: WEEKEND15</div>
                        </div>
                        
                        <div class="border-b border-gray-100 pb-2">
                            <div class="text-gray-600 text-sm">Twitter Services - 10% OFF</div>
                            <div class="text-gray-600 text-sm">Limited time offer</div>
                            <div class="text-lg font-bold text-gray-800">Use Code: TWITTER10</div>
                        </div>
                    </div>
                    
                    <div class="mt-4 space-y-2 text-sm text-gray-600">
                        <div>Don't miss out on these amazing weekend deals!</div>
                        <div>Discounts apply to all orders placed this weekend</div>
                        <div>Contact from <a href="tickets" class="text-blue-500 hover:text-blue-600">Tickets</a> for custom packages</div>
                    </div>
                </div>
                #}
            </div>
        </div>

        <!-- Main variables *content* -->
        {{ content }}

        <!-- Notifications wrapper -->
        <div id="notify-wrapper" class="alert alert-success hidden" style="display: none;"></div>

        {{ site['custom_footer'] }}

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Page Loader Logic
    const pageLoader = document.getElementById('page-loader');
    
    // Hide loader when page is fully loaded
    function hideLoader() {
        if (pageLoader) {
            pageLoader.style.opacity = '0';
            pageLoader.style.pointerEvents = 'none';
            setTimeout(() => {
                pageLoader.style.display = 'none';
            }, 300);
        }
    }
    
    // Hide loader when page is ready
    if (document.readyState === 'complete') {
        hideLoader();
    } else {
        window.addEventListener('load', hideLoader);
    }
    
    // Responsive Sidebar Logic
    const sidebar = document.getElementById('sidebar');
    const sidebarToggle = document.getElementById('sidebar-toggle');
    const sidebarOverlay = document.getElementById('sidebar-overlay');
    const sidebarClose = document.getElementById('sidebar-close');
    const topBar = document.getElementById('top-bar');

    // Define sidebar functions in global scope
    const openSidebar = () => {
        if (sidebar && sidebarOverlay && sidebarClose && topBar) {
            document.body.classList.add('overflow-hidden');
            sidebar.classList.remove('-translate-x-full');
            sidebar.style.zIndex = '60'; // Topbar'dan daha yÃ¼ksek z-index
            sidebarOverlay.classList.add('visible');
            sidebarClose.classList.remove('hidden');
            topBar.classList.add('top-bar-overlayed');
        }
    };
    
    const closeSidebar = () => {
        if (sidebar && sidebarOverlay && sidebarClose && topBar) {
            document.body.classList.remove('overflow-hidden');
            sidebar.classList.add('-translate-x-full');
            sidebar.style.zIndex = '40'; // Normal z-index'e geri dÃ¶n
            sidebarOverlay.classList.remove('visible');
            sidebarClose.classList.add('hidden');
            topBar.classList.remove('top-bar-overlayed');
        }
    };

    if (sidebarToggle && sidebar && sidebarOverlay && sidebarClose && topBar) {
        sidebarToggle.addEventListener('click', () => {
            if (sidebar.classList.contains('-translate-x-full')) {
                openSidebar();
            } else {
                closeSidebar();
            }
        });

        sidebarOverlay.addEventListener('click', closeSidebar);
        sidebarClose.addEventListener('click', closeSidebar);
    }

    // Balance Currency Dropdown Logic with Search
    const balanceCurrencyContainer = document.getElementById('balance-currency-container');
    if (balanceCurrencyContainer) {
        const toggleButton = document.getElementById('balance-currency-toggle');
        const dropdownMenu = document.getElementById('balance-currency-menu');
        const dropdownIcon = toggleButton.querySelector('.ri-arrow-down-s-line');
        const searchInput = document.getElementById('currency-search');
        const currencyItems = document.querySelectorAll('.currency-item');
        const noResultsMessage = document.getElementById('no-currency-results');

        // Toggle dropdown
        toggleButton.addEventListener('click', function(event) {
            event.stopPropagation();
            const isHidden = dropdownMenu.classList.contains('hidden');
            dropdownMenu.classList.toggle('hidden');
            toggleButton.setAttribute('aria-expanded', !isHidden);
            dropdownIcon.classList.toggle('rotate-180', !isHidden);
            
            // Focus search input when opening
            if (!isHidden && searchInput) {
                setTimeout(() => searchInput.focus(), 100);
            }
        });

        // Search functionality
        if (searchInput) {
            searchInput.addEventListener('input', function(e) {
                const searchTerm = e.target.value.toLowerCase().trim();
                let visibleCount = 0;

                currencyItems.forEach(item => {
                    const searchText = item.getAttribute('data-search-text');
                    const isVisible = !searchTerm || searchText.includes(searchTerm);
                    
                    if (isVisible) {
                        item.style.display = 'flex';
                        visibleCount++;
                    } else {
                        item.style.display = 'none';
                    }
                });

                // Show/hide no results message
                if (noResultsMessage) {
                    if (visibleCount === 0 && searchTerm) {
                        noResultsMessage.classList.remove('hidden');
                    } else {
                        noResultsMessage.classList.add('hidden');
                    }
                }
            });

            // Prevent dropdown from closing when clicking search input
            searchInput.addEventListener('click', function(event) {
                event.stopPropagation();
            });

            // Clear search when dropdown closes
            document.addEventListener('click', function(event) {
                if (!balanceCurrencyContainer.contains(event.target)) {
                    dropdownMenu.classList.add('hidden');
                    toggleButton.setAttribute('aria-expanded', 'false');
                    dropdownIcon.classList.remove('rotate-180');
                    
                    // Reset search
                    searchInput.value = '';
                    currencyItems.forEach(item => {
                        item.style.display = 'flex';
                    });
                    if (noResultsMessage) {
                        noResultsMessage.classList.add('hidden');
                    }
                }
            });
        } else {
            // Fallback for if search input doesn't exist
            document.addEventListener('click', function(event) {
                if (!balanceCurrencyContainer.contains(event.target)) {
                    dropdownMenu.classList.add('hidden');
                    toggleButton.setAttribute('aria-expanded', 'false');
                    dropdownIcon.classList.remove('rotate-180');
                }
            });
        }

        // Currency selection functionality
        currencyItems.forEach(item => {
            item.addEventListener('click', function(event) {
                event.preventDefault();
                
                // Get selected currency data
                const currency = this.getAttribute('data-rate-key');
                const csrfToken = "{{ csrftoken }}";
                
                // AJAX isteÄŸi gÃ¶nder
                $.ajax({
                    type: "POST",
                    url: "/change-currency",
                    data: {
                        currency: currency,
                        _csrf: csrfToken
                    },
                    success: function(response) {
                        // Ä°stek baÅŸarÄ±lÄ± olduÄŸunda sayfayÄ± yeniden yÃ¼kle
                        location.reload();
                    },
                    error: function(error) {
                        // Ä°stek baÅŸarÄ±sÄ±z olduÄŸunda burada hata iÅŸlemlerini ekleyebilirsiniz.
                        console.error("Hata: " + error);
                    }
                });
            });
        });
    }

    // User Dropdown Logic
    const userContainer = document.getElementById('user-dropdown-container');
    if (userContainer) {
        const toggleButton = document.getElementById('user-dropdown-toggle');
        const dropdownMenu = document.getElementById('user-dropdown-menu');
        const dropdownIcon = toggleButton.querySelector('.ri-arrow-down-s-line');

        toggleButton.addEventListener('click', function(event) {
            event.stopPropagation();
            const isHidden = dropdownMenu.classList.contains('hidden');
            dropdownMenu.classList.toggle('hidden');
            toggleButton.setAttribute('aria-expanded', !isHidden);
            dropdownIcon.classList.toggle('rotate-180', !isHidden);
        });

        document.addEventListener('click', function(event) {
            if (!userContainer.contains(event.target)) {
                dropdownMenu.classList.add('hidden');
                toggleButton.setAttribute('aria-expanded', 'false');
                dropdownIcon.classList.remove('rotate-180');
            }
        });
    }

    // Extras Panel Logic
    const extrasToggle = document.getElementById('extras-toggle');
    const mobileExtrasToggle = document.getElementById('mobile-extras-toggle');
    const extrasPanel = document.getElementById('extras-panel');
    const extrasClose = document.getElementById('extras-close');

    if (extrasPanel && extrasClose) {
        const openExtrasPanel = () => {
            extrasPanel.classList.remove('translate-x-full');
            // Disable page scroll on mobile when panel is open
            document.body.classList.add('overflow-hidden');
        };
        
        const closeExtrasPanel = () => {
            extrasPanel.classList.add('translate-x-full');
            // Re-enable page scroll
            document.body.classList.remove('overflow-hidden');
        };

        // Desktop extras button
        if (extrasToggle) {
            extrasToggle.addEventListener('click', openExtrasPanel);
        }
        
        // Mobile extras button
        if (mobileExtrasToggle) {
            mobileExtrasToggle.addEventListener('click', () => {
                // Close sidebar first if it's open on mobile
                if (sidebar && !sidebar.classList.contains('-translate-x-full')) {
                    closeSidebar();
                }
                // Then open extras panel
                openExtrasPanel();
            });
        }
        
        extrasClose.addEventListener('click', closeExtrasPanel);
        
        // Close panel when clicking outside
        document.addEventListener('click', function(event) {
            if (extrasPanel && !extrasPanel.contains(event.target) && 
                !extrasToggle?.contains(event.target) &&
                !mobileExtrasToggle?.contains(event.target)) {
                if (!extrasPanel.classList.contains('translate-x-full')) {
                    closeExtrasPanel();
                }
            }
        });
    }

    // Language Dropdown Logic
    const languageDropdownContainer = document.getElementById('language-dropdown-container');
    
    if (languageDropdownContainer) {
        const toggleButton = document.getElementById('language-dropdown-toggle');
        const dropdownMenu = document.getElementById('language-dropdown-menu');
        const dropdownIcon = document.getElementById('language-arrow-icon');
        const searchInput = document.getElementById('language-search');
        const languageItems = document.querySelectorAll('.language-item');
        const noResultsMessage = document.getElementById('no-language-results');

        // Toggle dropdown
        if (toggleButton && dropdownMenu && dropdownIcon) {
            toggleButton.addEventListener('click', function(event) {
                event.stopPropagation();
                const isHidden = dropdownMenu.classList.contains('hidden');
                
                if (isHidden) {
                    dropdownMenu.classList.remove('hidden');
                    toggleButton.setAttribute('aria-expanded', 'true');
                    dropdownIcon.classList.add('rotate-180');
                    
                    // Focus search input when opening
                    if (searchInput) {
                        setTimeout(() => searchInput.focus(), 100);
                    }
                } else {
                    dropdownMenu.classList.add('hidden');
                    toggleButton.setAttribute('aria-expanded', 'false');
                    dropdownIcon.classList.remove('rotate-180');
                }
            });
        }

        // Search functionality
        if (searchInput && languageItems.length > 0) {
            searchInput.addEventListener('input', function(e) {
                const searchTerm = e.target.value.toLowerCase().trim();
                let visibleCount = 0;

                languageItems.forEach(item => {
                    const searchText = item.getAttribute('data-search-text') || '';
                    const isVisible = !searchTerm || searchText.includes(searchTerm);
                    
                    if (isVisible) {
                        item.style.display = 'flex';
                        visibleCount++;
                    } else {
                        item.style.display = 'none';
                    }
                });

                // Show/hide no results message
                if (noResultsMessage) {
                    if (visibleCount === 0 && searchTerm) {
                        noResultsMessage.classList.remove('hidden');
                    } else {
                        noResultsMessage.classList.add('hidden');
                    }
                }
            });

            // Prevent dropdown from closing when clicking search input
            searchInput.addEventListener('click', function(event) {
                event.stopPropagation();
            });
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', function(event) {
            if (!languageDropdownContainer.contains(event.target)) {
                if (dropdownMenu) {
                    dropdownMenu.classList.add('hidden');
                }
                if (toggleButton) {
                    toggleButton.setAttribute('aria-expanded', 'false');
                }
                if (dropdownIcon) {
                    dropdownIcon.classList.remove('rotate-180');
                }
                
                // Reset search
                if (searchInput) {
                    searchInput.value = '';
                    languageItems.forEach(item => {
                        item.style.display = 'flex';
                    });
                    if (noResultsMessage) {
                        noResultsMessage.classList.add('hidden');
                    }
                }
            }
        });

        // Language selection functionality
        if (languageItems.length > 0) {
            languageItems.forEach(item => {
                item.addEventListener('click', function(event) {
                    event.preventDefault();
                    
                    // Update active state
                    languageItems.forEach(i => i.classList.remove('bg-gray-900/5'));
                    this.classList.add('bg-gray-900/5');
                    
                    // Close dropdown
                    if (dropdownMenu) {
                        dropdownMenu.classList.add('hidden');
                    }
                    if (toggleButton) {
                        toggleButton.setAttribute('aria-expanded', 'false');
                    }
                    if (dropdownIcon) {
                        dropdownIcon.classList.remove('rotate-180');
                    }
                    
                    // You can add navigation logic here
                    // window.location.href = this.getAttribute('href');
                });
            });
        }
    }

    // Notifications Panel Logic with Cookie Badge Management
    const notificationsToggle = document.getElementById('notifications-toggle');
    const notificationsPanel = document.getElementById('notifications-panel');
    const notificationsClose = document.getElementById('notifications-close');
    const notificationBadge = notificationsToggle ? notificationsToggle.querySelector('span') : null;

    // Cookie yardÄ±mcÄ± fonksiyonlarÄ±
    function setCookie(name, value, hours) {
        const date = new Date();
        date.setTime(date.getTime() + (hours * 60 * 60 * 1000));
        const expires = "expires=" + date.toUTCString();
        document.cookie = name + "=" + value + ";" + expires + ";path=/";
    }

    function getCookie(name) {
        const nameEQ = name + "=";
        const ca = document.cookie.split(';');
        for(let i = 0; i < ca.length; i++) {
            let c = ca[i];
            while (c.charAt(0) == ' ') c = c.substring(1, c.length);
            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
        }
        return null;
    }

    // Sayfa yÃ¼klendiÄŸinde badge durumunu kontrol et
    function checkBadgeVisibility() {
        const badgeHidden = getCookie('notification_badge_hidden');
        if (badgeHidden && notificationBadge) {
            notificationBadge.style.display = 'none';
        }
    }

    if (notificationsToggle && notificationsPanel && notificationsClose) {
        const openNotificationsPanel = () => {
            notificationsPanel.classList.remove('translate-x-full');
            // Badge'i gizle ve cookie oluÅŸtur (12 saat)
            if (notificationBadge) {
                notificationBadge.style.display = 'none';
                setCookie('notification_badge_hidden', 'true', 12);
            }
            // Disable page scroll
            document.body.classList.add('overflow-hidden');
        };
        
        const closeNotificationsPanel = () => {
            notificationsPanel.classList.add('translate-x-full');
            // Re-enable page scroll
            document.body.classList.remove('overflow-hidden');
        };

        notificationsToggle.addEventListener('click', openNotificationsPanel);
        notificationsClose.addEventListener('click', closeNotificationsPanel);
        
        // Close panel when clicking outside
        document.addEventListener('click', function(event) {
            if (notificationsPanel && !notificationsPanel.contains(event.target) && !notificationsToggle.contains(event.target)) {
                if (!notificationsPanel.classList.contains('translate-x-full')) {
                    closeNotificationsPanel();
                }
            }
        });
        
        // Sayfa yÃ¼klendiÄŸinde badge durumunu kontrol et
        checkBadgeVisibility();
    }
});
</script>
  <script>
$(document).ready(function() {
    // Mevcut control-label classÄ±na sahip elementleri dÃ¶nÃ¼ÅŸtÃ¼r
    function convertControlLabels() {
        $('label.control-label').each(function() {
            $(this).removeClass('control-label')
                   .addClass('block text-sm font-semibold text-gray-700 mb-2 uppercase tracking-wide');
        });
    }
    
    // Mevcut form-control classÄ±na sahip input elementleri dÃ¶nÃ¼ÅŸtÃ¼r
    function convertFormControls() {
        $('input.form-control').each(function() {
            $(this).removeClass('form-control')
                   .addClass('w-full border border-gray-300 rounded-[15px] p-3 focus:ring-blue-500 focus:border-blue-500 font-medium');
        });
        
        // Select elementleri iÃ§in de aynÄ± iÅŸlemi yap
        $('select.form-control').each(function() {
            $(this).removeClass('form-control')
                   .addClass('w-full border border-gray-300 rounded-[15px] p-3 focus:ring-blue-500 focus:border-blue-500 font-medium bg-white');
        });
        
        // Textarea elementleri iÃ§in de aynÄ± iÅŸlemi yap
        $('textarea.form-control').each(function() {
            $(this).removeClass('form-control')
                   .addClass('w-full border border-gray-300 rounded-[15px] p-3 focus:ring-blue-500 focus:border-blue-500 font-medium resize-vertical');
        });
    }
    
    // Arrow icon'u gÃ¼ncelle
    function updateArrowIcon($link) {
        var $arrowIcon = $link.find('.ri-arrow-right-s-line');
        if ($arrowIcon.length > 0) {
            $arrowIcon.removeClass('ml-auto text-xl opacity-0 group-hover:opacity-100 transition-opacity')
                     .addClass('absolute right-4 text-xl opacity-0 group-hover:opacity-100 transition-opacity');
        }
    }
    
    // Tek bir badge'i dÃ¶nÃ¼ÅŸtÃ¼r
    function transformBadge($badge) {
        var badgeText = $badge.text();
        var $parentSpan = $badge.parent('span');
        var $parentLink = $badge.closest('a');
        
        if ($parentSpan.length > 0) {
            // Parent span'in text'ini temizle
            var fullText = $parentSpan.text();
            var cleanText = fullText.replace(badgeText, '').trim();
            $parentSpan.text(cleanText);
            
            // Yeni badge span'i oluÅŸtur ve ekle
            var $newBadge = $('<span></span>')
                .addClass('ml-auto bg-yellow-500 text-white text-xs font-bold w-5 h-5 flex items-center justify-center rounded-full group-hover:opacity-0 transition-opacity')
                .text(badgeText);
            
            $badge.remove();
            $parentSpan.after($newBadge);
        } else {
            // Parent span yoksa normal dÃ¶nÃ¼ÅŸtÃ¼r
            $badge.removeAttr('style')
                  .removeClass('badge')
                  .addClass('ml-auto bg-yellow-500 text-white text-xs font-bold w-5 h-5 flex items-center justify-center rounded-full group-hover:opacity-0 transition-opacity')
                  .text(badgeText);
        }
        
        // Arrow icon'u gÃ¼ncelle
        updateArrowIcon($parentLink);
    }
    
    // Badge elementlerini dÃ¶nÃ¼ÅŸtÃ¼r (sadece tickets linkinde)
    function convertBadges() {
        $('a[href*="tickets"] .badge, a[href*="ticket"] .badge').each(function() {
            transformBadge($(this));
        });
    }
    
    // Sayfa yÃ¼klendiÄŸinde mevcut elementleri dÃ¶nÃ¼ÅŸtÃ¼r
    convertControlLabels();
    convertFormControls();
    convertBadges();
    
    // DOM'da deÄŸiÅŸiklikleri izlemek iÃ§in MutationObserver kullan
    const observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
            // Yeni eklenen node'larÄ± kontrol et
            mutation.addedNodes.forEach(function(node) {
                if (node.nodeType === 1) { // Element node
                    // Eklenen element label ise ve control-label classÄ±na sahipse
                    if (node.tagName === 'LABEL' && $(node).hasClass('control-label')) {
                        $(node).removeClass('control-label')
                               .addClass('block text-sm font-semibold text-gray-700 mb-2 uppercase tracking-wide');
                    }
                    
                    // Eklenen element input ise ve form-control classÄ±na sahipse
                    if (node.tagName === 'INPUT' && $(node).hasClass('form-control')) {
                        $(node).removeClass('form-control')
                               .addClass('w-full border border-gray-300 rounded-[15px] p-3 focus:ring-blue-500 focus:border-blue-500 font-medium');
                    }
                    
                    // Eklenen element select ise ve form-control classÄ±na sahipse
                    if (node.tagName === 'SELECT' && $(node).hasClass('form-control')) {
                        $(node).removeClass('form-control')
                               .addClass('w-full border border-gray-300 rounded-[15px] p-3 focus:ring-blue-500 focus:border-blue-500 font-medium bg-white');
                    }
                    
                    // Eklenen element textarea ise ve form-control classÄ±na sahipse
                    if (node.tagName === 'TEXTAREA' && $(node).hasClass('form-control')) {
                        $(node).removeClass('form-control')
                               .addClass('w-full border border-gray-300 rounded-[15px] p-3 focus:ring-blue-500 focus:border-blue-500 font-medium resize-vertical');
                    }
                    
                    // Eklenen element iÃ§inde control-label classÄ±na sahip label'lar varsa
                    $(node).find('label.control-label').each(function() {
                        $(this).removeClass('control-label')
                               .addClass('block text-sm font-semibold text-gray-700 mb-2 uppercase tracking-wide');
                    });
                    
                    // Eklenen element iÃ§inde form-control classÄ±na sahip input'lar varsa
                    $(node).find('input.form-control').each(function() {
                        $(this).removeClass('form-control')
                               .addClass('w-full border border-gray-300 rounded-[15px] p-3 focus:ring-blue-500 focus:border-blue-500 font-medium');
                    });
                    
                    // Eklenen element iÃ§inde form-control classÄ±na sahip select'ler varsa
                    $(node).find('select.form-control').each(function() {
                        $(this).removeClass('form-control')
                               .addClass('w-full border border-gray-300 rounded-[15px] p-3 focus:ring-blue-500 focus:border-blue-500 font-medium bg-white');
                    });
                    
                    // Eklenen element iÃ§inde form-control classÄ±na sahip textarea'lar varsa
                    $(node).find('textarea.form-control').each(function() {
                        $(this).removeClass('form-control')
                               .addClass('w-full border border-gray-300 rounded-[15px] p-3 focus:ring-blue-500 focus:border-blue-500 font-medium resize-vertical');
                    });
                    
                    // Eklenen element span ise ve badge classÄ±na sahipse (tickets linkinde ise)
                    if (node.tagName === 'SPAN' && $(node).hasClass('badge') && $(node).closest('a[href*="tickets"], a[href*="ticket"]').length > 0) {
                        transformBadge($(node));
                    }
                    
                    // Eklenen element iÃ§inde badge classÄ±na sahip spanlar varsa (tickets linkinde)
                    $(node).find('a[href*="tickets"] .badge, a[href*="ticket"] .badge').each(function() {
                        transformBadge($(this));
                    });
                }
            });
            
            // Class deÄŸiÅŸikliklerini kontrol et
            if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
                const target = $(mutation.target);
                if (target.is('label') && target.hasClass('control-label')) {
                    target.removeClass('control-label')
                          .addClass('block text-sm font-semibold text-gray-700 mb-2 uppercase tracking-wide');
                }
                if (target.is('input') && target.hasClass('form-control')) {
                    target.removeClass('form-control')
                          .addClass('w-full border border-gray-300 rounded-[15px] p-3 focus:ring-blue-500 focus:border-blue-500 font-medium');
                }
                if (target.is('select') && target.hasClass('form-control')) {
                    target.removeClass('form-control')
                          .addClass('w-full border border-gray-300 rounded-[15px] p-3 focus:ring-blue-500 focus:border-blue-500 font-medium bg-white');
                }
                if (target.is('textarea') && target.hasClass('form-control')) {
                    target.removeClass('form-control')
                          .addClass('w-full border border-gray-300 rounded-[15px] p-3 focus:ring-blue-500 focus:border-blue-500 font-medium resize-vertical');
                }
            }
        });
    });
    
    // Dripfeed checkbox'Ä±nÄ± toggle switch'e dÃ¶nÃ¼ÅŸtÃ¼r
    function convertDripfeedToToggle() {
        const $dripfeedDiv = $('#dripfeed');
        if ($dripfeedDiv.length === 0) return;
        
        const $checkbox = $('#field-orderform-fields-check');
        const $checkboxContainer = $checkbox.closest('.form-group__checkbox');
        
        if ($checkbox.length > 0 && $checkboxContainer.length > 0) {
            // Toggle switch HTML'i oluÅŸtur
            const toggleHTML = `
            <style>#order_check input[type="checkbox"]:checked + label .dot {
    transform: translateX(16px);
}

#order_check input[type="checkbox"]:checked + label .bg-gray-300 {
    background-color: #3b82f6; /* Tailwind'in blue-500 rengi */
}</style>
          <div class="my-4">
    <div class="flex items-center justify-between">
        <span class="text-sm font-semibold text-gray-700 uppercase tracking-wide">Drip-feed</span>
        <div class="relative">
            <input type="checkbox" name="OrderForm[check]" value="1" id="field-orderform-fields-check" class="sr-only">
            <label for="field-orderform-fields-check" class="flex items-center cursor-pointer">
                <div class="relative">
                    <div class="w-10 h-6 bg-gray-300 rounded-full shadow-inner"></div>
                    <div class="dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform duration-300 ease-in-out"></div>
                </div>
            </label>
        </div>
    </div>
</div>
            `;
            
            // Mevcut checkbox container'Ä± toggle ile deÄŸiÅŸtir
            $checkboxContainer.replaceWith(toggleHTML);
        }
        
        // Runs ve Interval inputlarÄ±nÄ± yan yana getir
        const $dependFields = $('#dripfeed-options');
        if ($dependFields.length > 0) {
            const $runsGroup = $dependFields.find('input[name="OrderForm[runs]"]').closest('.form-group');
            const $intervalGroup = $dependFields.find('input[name="OrderForm[interval]"]').closest('.form-group');
            const $totalQuantityGroup = $dependFields.find('input[name="OrderForm[total_quantity]"]').closest('.form-group');
            
            if ($runsGroup.length > 0 && $intervalGroup.length > 0) {
                // Yan yana dÃ¼zenleme iÃ§in wrapper div oluÅŸtur
                const $flexWrapper = $('<div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"></div>');
                
                // Runs ve Interval gruplarÄ±nÄ± wrapper'a ekle
                $flexWrapper.append($runsGroup.detach());
                $flexWrapper.append($intervalGroup.detach());
                
                // Wrapper'Ä± depend-fields'e ekle
                $dependFields.prepend($flexWrapper);
                
                // Total quantity'yi en alta ekle
                if ($totalQuantityGroup.length > 0) {
                    $dependFields.append($totalQuantityGroup.detach());
                }
            }
        }
    }
    
    // Toggle functionality'yi ekle
    function setupDripfeedToggle() {
        $(document).on('change', '#field-orderform-fields-check', function() {
            const $dependFields = $('#dripfeed-options');
            if ($(this).is(':checked')) {
                $dependFields.removeClass('hidden').slideDown(200);
            } else {
                $dependFields.slideUp(200, function() {
                    $(this).addClass('hidden');
                });
            }
        });
    }
    
    // Sayfa yÃ¼klendiÄŸinde mevcut elementleri dÃ¶nÃ¼ÅŸtÃ¼r
    convertControlLabels();
    convertFormControls();
    convertBadges();
    convertDripfeedToToggle();
    setupDripfeedToggle();
    
    // Observer'Ä± baÅŸlat
    observer.observe(document.body, {
        childList: true,
        subtree: true,
        attributes: true,
        attributeFilter: ['class']
    });
    
    // DOM'da yeni dripfeed elementleri eklenirse onlarÄ± da dÃ¶nÃ¼ÅŸtÃ¼r
    const dripfeedObserver = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
            mutation.addedNodes.forEach(function(node) {
                if (node.nodeType === 1) {
                    if ($(node).is('#dripfeed') || $(node).find('#dripfeed').length > 0) {
                        setTimeout(function() {
                            convertDripfeedToToggle();
                            setupDripfeedToggle();
                        }, 100);
                    }
                }
            });
        });
    });
    
    dripfeedObserver.observe(document.body, {
        childList: true,
        subtree: true
    });
});
</script>



    </div>
</body>
{% else %}


    <link rel="stylesheet" href="https://cdn.sosyaltrend.net/login2/styles.css?time=454545">
    <link rel="stylesheet" href="https://cdn.sosyaltrend.net/login2/style2.css?time=345345">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://api.fontshare.com/v2/css?f[]=satoshi@400,500,700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.2.0/fonts/remixicon.css" rel="stylesheet" />
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>

    <script src="https://storage.perfectcdn.com/libs/jquery/1.12.4/jquery.min.js"></script>

</head>
<body class="overflow-x-hidden">

    <div class="page-wrapper">
        <div class="background-effects">
            <div class="grid-overlay"></div>
            <div class="blur-orb orb1"></div>
            <div class="blur-orb orb2"></div>
            <div class="blur-orb orb3"></div>
            <div class="blur-orb orb4"></div>
            <div class="stars">
                <!-- Stars will be generated by JavaScript -->
            </div>
        </div>

        <header class="header">
            <div class="container">
                <div class="header-inner">
                    <div class="logo">
                        <a href="{{ page_url('index') }}">
                            {% if site['logo'] %}
                                <img src="{{ site['logo'] }}" alt="{{ site['name'] }}" title="{{ site['name'] }}" style="
            height: 40px !important;
            width: auto !important;
            max-width: 150px !important;
            max-height: 40px !important;
            object-fit: contain !important;
            display: block !important;
            opacity: 1 !important;
            visibility: visible !important;
        ">
                            {% else %}
                                <img src="https://placehold.co/32x32/0A0F1F/fff?text=S" alt="Logo"> 
                                <span>{{ site['name'] }}</span>
                            {% endif %}
                        </a>
                    </div>
                    <nav class="main-nav">
                        <ul>
                            {% for menu in site['menu'] %}
                                <li><a href="{{ menu['link'] }}" {% if menu['external'] %} target="_blank" {% endif %}>
                                    {% if menu['icon'] %}
                                        <i class="{{ menu['icon'] }}"></i>
                                    {% else %}
                                        <i data-feather="list"></i>
                                    {% endif %}
                                    <span>{{ menu['name'] }}</span>
                                </a></li>
                                {% if not loop.last %}<li class="separator"></li>{% endif %}
                            {% endfor %}
                            <li class="separator"></li>
                            <li class="relative group">
                                <a href="#" class="flex items-center">
                                    <span>Others</span>
                                    <i data-feather="chevron-down" class="w-4 h-4 ml-1 transition-transform group-hover:rotate-180"></i>
                                </a>
                                <div class="absolute left-0 top-full pt-2 w-48 origin-top-left bg-white border border-gray-200/50 rounded-xl shadow-lg hidden group-hover:block z-20">
                                    <div class="p-2">
                                        <a href="/api" class="flex items-center gap-3 w-full px-4 py-2 text-left text-sm text-gray-700 rounded-lg hover:bg-gray-100">API</a>
                                        <a href="/terms" class="flex items-center gap-3 w-full px-4 py-2 text-left text-sm text-gray-700 rounded-lg hover:bg-gray-100">Terms</a>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </nav>
                    <div class="header-actions">
                        <!-- Language Switcher Dropdown -->
                        {% if site['languages']|length > 1 %}
                        <div class="relative group hidden md:inline-flex" id="mobile-language-dropdown-container">
                            {% for lang in site['languages'] %}
                                {% if lang['active'] %}
{% if lang.code == 'fa' %}
  {% set flag_code = 'ir' %}
{% elseif lang.code == 'uk' %}
  {% set flag_code = 'ua' %} 
{% elseif lang.code == 'ja' %}
  {% set flag_code = 'jp' %}  
{% elseif lang.code == 'zh' %}
  {% set flag_code = 'cn' %}  
{% elseif lang.code == 'vi' %}
  {% set flag_code = 'vn' %}   
{% elseif lang.code == 'ar' %}
  {% set flag_code = 'sa' %}    
{% elseif lang.code == 'ko' %}
  {% set flag_code = 'kr' %}    
{% elseif lang.code == 'hi' %}
  {% set flag_code = 'in' %}    
{% elseif lang.code == 'en' %}
  {% set flag_code = 'us' %}   
{% elseif lang.code == 'bp' %}
  {% set flag_code = 'pt' %}     
{% else %}
  {% set flag_code = lang.code %}
{% endif %}


                            <button id="mobile-language-dropdown-toggle" class="btn btn-secondary flex items-center gap-2 !p-1.5" aria-haspopup="true" aria-expanded="false">
                                <img class="w-6 h-6 object-cover rounded-full" src="https://raw.githubusercontent.com/iMuFeng/round-flag-icons/f81ac8d7f7dc7868bc72cd64f0ef51a04bee82c2/flags/{{ flag_code }}.svg" alt="{{ lang['name'] }}">
                                <i class="ri-arrow-down-s-line text-lg transition-transform duration-200" id="mobile-language-arrow-icon"></i>
                            </button>
                                {% endif %}
                            {% endfor %}
                            <div id="mobile-language-dropdown-menu" class="absolute right-0 top-full pt-2 w-64 origin-top-right bg-white border border-gray-200/50 rounded-xl shadow-lg hidden z-20">
                                <!-- Search Box -->
                                <div class="p-3 border-b border-gray-200/50">
                                    <div class="relative">
                                        <input type="text" id="mobile-language-search" placeholder="Search language..." class="w-full pl-10 pr-4 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                        <i class="ri-search-line absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                                    </div>
                                </div>
                                
                                <!-- Language List with Scroll -->
                                <div class="max-h-64 overflow-y-auto custom-scrollbar">
                                    <div class="p-2 space-y-1" id="mobile-language-list">
                                        {% for lang in site['languages'] %}
{% if lang.code == 'fa' %}
  {% set flag_code = 'ir' %}
{% elseif lang.code == 'uk' %}
  {% set flag_code = 'ua' %} 
{% elseif lang.code == 'ja' %}
  {% set flag_code = 'jp' %}  
{% elseif lang.code == 'zh' %}
  {% set flag_code = 'cn' %}  
{% elseif lang.code == 'vi' %}
  {% set flag_code = 'vn' %}   
{% elseif lang.code == 'ar' %}
  {% set flag_code = 'sa' %}    
{% elseif lang.code == 'ko' %}
  {% set flag_code = 'kr' %}    
{% elseif lang.code == 'hi' %}
  {% set flag_code = 'in' %}    
{% elseif lang.code == 'en' %}
  {% set flag_code = 'us' %}   
  {% elseif lang.code == 'bp' %}
  {% set flag_code = 'pt' %}    
{% else %}
  {% set flag_code = lang.code %}
{% endif %}


                                        <a href="{{ lang['url'] }}" class="mobile-language-item flex items-center gap-3 w-full px-4 py-2 text-left text-sm text-gray-700 rounded-lg hover:bg-gray-100 {% if lang['active'] %}bg-gray-100{% endif %}" data-search-text="{{ lang['name']|lower }}">
                                            <img class="w-6 h-6 object-cover rounded-full" src="https://raw.githubusercontent.com/iMuFeng/round-flag-icons/f81ac8d7f7dc7868bc72cd64f0ef51a04bee82c2/flags/{{ flag_code }}.svg" alt="{{ lang['name'] }}">
                                            <span>{{ lang['name'] }}</span>
                                        </a>
                                        {% endfor %}
                                    </div>
                                    
                                    <!-- No Results Message -->
                                    <div id="mobile-no-language-results" class="p-4 text-center text-gray-500 text-sm hidden">
                                        <i class="ri-search-line text-2xl mb-2 block"></i>
                                        No language found
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endif %}
                        <div class="w-px h-8 bg-gray-200/50 hidden md:inline-flex"></div>

                        <a href="/" class="btn btn-secondary hidden md:inline-flex"><span>Login</span> <i class="ri-user-shared-line"></i></a>
                        <a href="/signup" class="btn btn-primary hidden md:inline-flex"><span>Sign Up</span> <i class="ri-user-add-line"></i></a>
                        <button id="menu-toggle" class="md:hidden btn btn-secondary">
                            <i data-feather="menu"></i>
                        </button>
                    </div>
                </div>
                <div id="mobile-menu" class="hidden md:hidden mt-4 bg-white border border-gray-200/50 rounded-2xl p-4">
                    <nav class="flex flex-col space-y-4">
                        {% for menu in site['menu'] %}
                            <a href="{{ menu['link'] }}" {% if menu['external'] %} target="_blank" {% endif %} class="flex items-center gap-2 text-gray-700 hover:text-blue-600">
                                {% if menu['icon'] %}
                                    <i class="{{ menu['icon'] }}"></i>
                                {% endif %}
                                <span>{{ menu['name'] }}</span>
                            </a>
                        {% endfor %}
                        <div>
                            <button id="mobile-others-toggle" class="flex items-center justify-between w-full gap-2 text-gray-700 hover:text-blue-600">
                                <span class="flex items-center gap-2">
                                    <i data-feather="more-horizontal"></i>
                                    <span>Others</span>
                                </span>
                                <i data-feather="chevron-down" class="w-5 h-5 transition-transform"></i>
                            </button>
                            <div id="mobile-others-content" class="hidden mt-2 pl-6 space-y-2">
                                <a href="/api" class="flex items-center gap-2 text-gray-600 hover:text-blue-600">API</a>
                                <a href="/terms" class="flex items-center gap-2 text-gray-600 hover:text-blue-600">Terms</a>
                            </div>
                        </div>
                    </nav>
                    <div class="border-t border-gray-200/80 my-4"></div>
                    <div class="flex flex-col space-y-3">
                        <a href="/" class="btn btn-secondary w-full"><span>Login</span> <i class="ri-user-shared-line"></i></a>
                        <a href="/signup" class="btn btn-primary w-full"><span>Sign Up</span> <i class="ri-user-add-line"></i></a>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main variables *content* -->
		{{ content }}

		<!-- Notifications wrapper -->
		<div id="notify-wrapper" class="alert alert-success hidden" style="display: none;"></div>

{% if page['url'] != "/services" %}

        <footer class="site-footer">
            <div class="container mx-auto px-4">
                <div class="footer-grid">
                    <div class="footer-about">
                        <div class="logo flex items-center gap-2">
                            {% if site['logo'] %}
                                <img src="{{ site['logo'] }}" alt="{{ site['name'] }}" class="rounded-md" style="    height: 40px !important;
    width: auto !important;
    max-width: 150px !important;
    max-height: 40px !important;
    object-fit: contain !important;
    display: block !important;
    opacity: 1 !important;
    visibility: visible !important;">
                            {% else %}
                                <img src="https://placehold.co/32x32/0A0F1F/fff?text=S" alt="Logo" class="rounded-md"> 
                                <span class="font-bold text-xl text-gray-800">{{ site['name'] }}</span>
                            {% endif %}
                        </div>
                         <div class="mt-6 space-y-6">
                            <div class="company-info-block">
                                <h4>ITSJUSTSEO Limited</h4>
                                <p>Address: Room H 11, 1/F, Kaiser Estate Phase 2, No. 51 Man Yue Street, Hung Hom, Hong Kong</p>
                            </div>
                        </div>
                    </div>
                    <div class="footer-links">
                        <h4>Quick Links</h4>
                        <ul>
                            <li><a href="/signup">Sign up</a></li>
                            <li><a href="/terms">Terms</a></li>
                            <li><a href="/howitworks">How it Works</a></li>
                            <li><a href="/blog">Blogs</a></li>
                        </ul>
                        <div class="footer-payment-logos">
                            <div class="payment-logo-card">
                                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/2a/Mastercard-logo.svg/2560px-Mastercard-logo.svg.png" alt="Mastercard">
                            </div>
                             <div class="payment-logo-card">
                                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/5e/Visa_Inc._logo.svg/2560px-Visa_Inc._logo.svg.png" alt="Visa">
                            </div>
                             <div class="payment-logo-card">
                                <img src="https://cdn.smmspot.net/smmflare/assets/images/payment/paypal.svg" alt="Paypal">
                            </div>
                        </div>
                    </div>
                </div>
                <p class="copyright">Â© 2025 {{ site['name'] }}. All Rights Reserved.</p>
            </div>
        </footer>
{% endif %}

    </div>

    <style>
        .payment-logo-card img {
            filter: none !important;
            opacity: 1 !important;
        }
    </style>

    {{ site['custom_footer'] }}

    {% for script in site['scripts'] %}
        <script type="text/javascript" {% if script['src'] %} src="{{ script['src'] }}" {% endif %}>
            {% if script['code'] %}
{{ script['code'] }}
{% endif %}
        </script>
    {% endfor %}

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>AOS.init({ once: true });</script>
    <script src="https://cdn.sosyaltrend.net/login2/script.js?time=34234234"></script>
    
    <script>
    // Mobile Language Dropdown Logic
    document.addEventListener('DOMContentLoaded', function() {
        const mobileLanguageContainer = document.getElementById('mobile-language-dropdown-container');
        
        if (mobileLanguageContainer) {
            const toggleButton = document.getElementById('mobile-language-dropdown-toggle');
            const dropdownMenu = document.getElementById('mobile-language-dropdown-menu');
            const dropdownIcon = document.getElementById('mobile-language-arrow-icon');
            const searchInput = document.getElementById('mobile-language-search');
            const languageItems = document.querySelectorAll('.mobile-language-item');
            const noResultsMessage = document.getElementById('mobile-no-language-results');

            // Toggle dropdown
            if (toggleButton && dropdownMenu && dropdownIcon) {
                toggleButton.addEventListener('click', function(event) {
                    event.stopPropagation();
                    const isHidden = dropdownMenu.classList.contains('hidden');
                    
                    if (isHidden) {
                        dropdownMenu.classList.remove('hidden');
                        toggleButton.setAttribute('aria-expanded', 'true');
                        dropdownIcon.classList.add('rotate-180');
                        
                        // Focus search input when opening
                        if (searchInput) {
                            setTimeout(() => searchInput.focus(), 100);
                        }
                    } else {
                        dropdownMenu.classList.add('hidden');
                        toggleButton.setAttribute('aria-expanded', 'false');
                        dropdownIcon.classList.remove('rotate-180');
                    }
                });
            }

            // Search functionality
            if (searchInput && languageItems.length > 0) {
                searchInput.addEventListener('input', function(e) {
                    const searchTerm = e.target.value.toLowerCase().trim();
                    let visibleCount = 0;

                    languageItems.forEach(item => {
                        const searchText = item.getAttribute('data-search-text') || '';
                        const isVisible = !searchTerm || searchText.includes(searchTerm);
                        
                        if (isVisible) {
                            item.style.display = 'flex';
                            visibleCount++;
                        } else {
                            item.style.display = 'none';
                        }
                    });

                    // Show/hide no results message
                    if (noResultsMessage) {
                        if (visibleCount === 0 && searchTerm) {
                            noResultsMessage.classList.remove('hidden');
                        } else {
                            noResultsMessage.classList.add('hidden');
                        }
                    }
                });

                // Prevent dropdown from closing when clicking search input
                searchInput.addEventListener('click', function(event) {
                    event.stopPropagation();
                });
            }

            // Close dropdown when clicking outside
            document.addEventListener('click', function(event) {
                if (!mobileLanguageContainer.contains(event.target)) {
                    if (dropdownMenu) {
                        dropdownMenu.classList.add('hidden');
                    }
                    if (toggleButton) {
                        toggleButton.setAttribute('aria-expanded', 'false');
                    }
                    if (dropdownIcon) {
                        dropdownIcon.classList.remove('rotate-180');
                    }
                    
                    // Reset search
                    if (searchInput) {
                        searchInput.value = '';
                        languageItems.forEach(item => {
                            item.style.display = 'flex';
                        });
                        if (noResultsMessage) {
                            noResultsMessage.classList.add('hidden');
                        }
                    }
                }
            });

            // Language selection functionality
            if (languageItems.length > 0) {
                languageItems.forEach(item => {
                    item.addEventListener('click', function(event) {
                        // Don't prevent default - allow navigation to href
                        
                        // Update active state
                        languageItems.forEach(i => i.classList.remove('bg-gray-100'));
                        this.classList.add('bg-gray-100');
                        
                        // Close dropdown
                        if (dropdownMenu) {
                            dropdownMenu.classList.add('hidden');
                        }
                        if (toggleButton) {
                            toggleButton.setAttribute('aria-expanded', 'false');
                        }
                        if (dropdownIcon) {
                            dropdownIcon.classList.remove('rotate-180');
                        }
                        
                        // Navigate to the href URL
                        window.location.href = this.getAttribute('href');
                    });
                });
            }
        }
    });
    </script>
</body>
</html>
{% endif %}
{% else %}
		{{ content }}
{% endif %}
